name: Debug Network

on: [push]

jobs:
  debug-connection:
    runs-on: ubuntu-latest
    steps:
      - name: 1. Mostrar IP pública del Runner (Para ver si sale a internet)
        run: curl ifconfig.me

      - name: 2. Verificar la IP del Secreto (Mascara los últimos dígitos)
        run: |
          echo "La IP configurada empieza por: $(echo ${{ secrets.SERVER_HOST }} | cut -d. -f1-2).XX.XX"
          # Esto es para que TÚ verifiques visualmente en los logs si es la IP correcta

      - name: 3. Ping al Servidor (Prueba de conectividad básica)
        run: ping -c 4 ${{ secrets.SERVER_HOST }}

      - name: 4. Netcat al Puerto 22 (Prueba de puerto real)
        # Esto nos dirá si el puerto 22 responde "OPEN" o "TIMED OUT"
        run: nc -zv -w 5 ${{ secrets.SERVER_HOST }} 22
